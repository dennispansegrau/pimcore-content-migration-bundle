{% autoescape false %}
private function {{ methodName }}(): {{ classname }}
    {
{% if builder is null %}
        // TODO: Insert a builder
        // No Builder found for type {{ type }}. Please create your own builder.
        // You can extend the \PimcoreContentMigration\Builder\Document\DocumentBuilder or any other builder.

{% set builder = '[YOUR-BUILDER]' %}
{% endif %}
{% if dependencies is not empty %}
        # Find or create dependency dummies (without content)
{% for dependency in dependencies %}
        ${{ dependency.variableName }} = $this->{{ dependency.methodName }}();
{% endfor %}

{% endif %}
{% if settings.isRootLevel() %}
        # Create {{ type }} {{ document.getFullPath() }}
        return {{ builder }}::findOrCreate('{{ document.getFullPath() }}')
{# BUILDER SPECIFIC SETTER #}
{% if type == 'email' %}
            ->setSubject('{{ document.getSubject() }}')
            ->setTo('{{ document.getTo() }}')
            ->setFrom('{{ document.getFrom() }}')
            ->setReplyTo('{{ document.getReplyTo() }}')
            ->setCc('{{ document.getCc() }}')
            ->setBcc('{{ document.getBcc() }}')
{% elseif type == 'folder' %}
{% elseif type == 'hardlink' %}
            ->setSourceId({% if document.getSourceId() %}{{ document.getSourceId() }}{% else %}null{% endif %})
            ->setPropertiesFromSource('{{ document.getPropertiesFromSource() ? 'true' : 'false' }}')
            ->setChildrenFromSource('{{ document.getChildrenFromSource() ? 'true' : 'false' }}')
{% elseif type == 'link' %}
            ->setDirect('{{ document.getDirect() }}')
            ->setLinktype('{{ document.getLinktype() }}')
{% elseif type == 'page' %}
            ->setDescription('{{ document.getDescription() }}')
            ->setTitle('{{ document.getTitle() }}')
            ->setPrettyUrl('{{ document.getPrettyUrl() }}')
{% elseif type == 'snippet' %}
{% elseif type == 'printpage' %}
{% elseif type == 'printcontainer' %}
{% elseif type == 'newsletter' %}
            ->setPlaintext('{{ document.getPlaintext() }}')
            ->setEnableTrackingParameters('{{ document.getEnableTrackingParameters() ? 'true' : 'false' }}')
            ->setTrackingParameterSource('{{ document.getTrackingParameterSource() }}')
            ->setTrackingParameterMedium('{{ document.getTrackingParameterMedium() }}')
            ->setTrackingParameterName('{{ document.getTrackingParameterName() }}')
            ->setSendingMode('{{ document.getSendingMode() }}')
{% endif %}
{# PAGE SNIPPET BUILDER SETTER #}
{% if isPageSnippet %}
            ->setController({% if document.getController() %}'{{ document.getController() }}'{% else %}null{% endif %})
            ->setTemplate({% if document.getTemplate() %}'{{ document.getTemplate() }}'{% else %}null{% endif %})
{% for property in document.getProperties %}
            ->setProperty('{{ property.getName() }}', '{{ property.getType() }}', {{ pcmb_value_to_string(property.getData(), dependencies) }}, {{ property.getInherited() ? 'true' : 'false' }}, {{ property.getInheritable() ? 'true' : 'false' }})
{% endfor %}
{% include('@PimcoreContentMigration/code_templates/document/_editables.php.twig') %}
{% endif %}
{# PRINT ABSTRACT BUILDER SETTER #}
{% if isPrintAbstract %}
            ->setLastGeneratedDate(new \DateTime('{{ document.getLastGeneratedDate()|date(constant('DateTime::ATOM')) }}'))
            ->setLastGenerated({{ document.getLastGenerated() }})
            ->setLastGenerateMessage('{{ document.getLastGenerateMessage() }}')
{% endif %}
{# DOCUMENT BUILDER SETTER #}
            ->setIndex({{ document.getIndex() }})
            ->setType('{{ document.getType() }}')
            ->setPublished({{ document.getPublished() ? 'true' : 'false' }})
            ->save()
            ->getObject();
    }
{% for dependency in dependencies %}

    {{ dependency.code }}
{% endfor %}
{% else %}
        return {{ builder }}::findOrCreate('{{ document.getFullPath() }}')
            ->getObject();
    }
{% endif %}
{% endautoescape %}