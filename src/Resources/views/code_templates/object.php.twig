{% autoescape false %}
private function {{ methodName }}(): {{ classname }}
    {
{% if dependencies is not empty %}
        # Find or create dependency dummies (without content)
{% for dependency in dependencies %}
        ${{ dependency.variableName }} = $this->{{ dependency.methodName }}();
{% endfor %}

{% endif %}
{% if settings.withDependencies() %}
    # Create {{ type }} {{ object.getFullPath() }}
    return {{ builder }}::findOrCreate('{{ object.getFullPath() }}', {{ classname }}::class)
{# CONCRETE BUILDER SETTER #}
{% if isConcrete %}
    ->setPublished({{ object.getPublished() ? 'true' : 'false' }})
{% endif %}
{# DATA OBJECT BUILDER SETTER #}
{% for setter in setters %}
{% if setter.isObjectOrListOfObjects() %}
{% if setter.value is instanceof('Pimcore\\Model\\DataObject\\Localizedfield') %}
    ->setLocalizedfield('{{ setter.name }}', {{ pcmb_value_to_string(setter.value, dependencies) }})
{% elseif setter.value is instanceof('Pimcore\\Model\\DataObject\\Data\\ImageGallery') %}
    ->setImageGallery('{{ setter.name }}', {{ pcmb_value_to_string(setter.value, dependencies) }})
{% elseif setter.getType() == 'array of Pimcore\\Model\\DataObject\\Data\\UrlSlug' %}
    ->setUrlSlug('{{ setter.name }}', {{ pcmb_value_to_string(setter.value, dependencies) }})
{% else %}
    // TODO: type {{ setter.type }} is not implemented for {{ setter.name }}
{% endif %}
{% else %}
    ->set('{{ setter.name }}', {{ pcmb_value_to_string(setter.value, dependencies) }})
{% endif %}
{% endfor %}
{% for property in object.getProperties %}
    ->setProperty('{{ property.getName() }}', '{{ property.getType() }}', {% if property.getType() == 'bool' %}{{ property.getData() ? 'true' : 'false' }}{% else %}'{{ property.getData() }}'{% endif %}, {{ property.getInherited() ? 'true' : 'false' }}, {{ property.getInheritable() ? 'true' : 'false' }})
{% endfor %}
    ->save()
    ->getObject();
}
{% for dependency in dependencies %}

    {{ dependency.code }}
{%- endfor %}
{% else %}
        return {{ builder }}::findOrCreate('{{ object.getFullPath() }}', {{ classname }}::class)
            ->getObject();
    }
{% endif %}
{% endautoescape %}