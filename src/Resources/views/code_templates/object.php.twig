{% autoescape false %}
private function {{ methodName }}(): {{ classname }}
    {
{% if dependencies is not empty %}
        # Find or create dependency dummies (without content)
{% for dependency in dependencies %}
        ${{ dependency.variableName }} = $this->{{ dependency.methodName }}();
{% endfor %}

{% endif %}
{% if settings.withDependencies() %}
        # Create {{ type }} {{ object.getFullPath() }}
        $builder = {{ builder }}::findOrCreate('{{ object.getFullPath() }}', {{ classname }}::class);
        $builder
{# CONCRETE BUILDER SETTER #}
{% if isConcrete %}
            ->setPublished({{ object.getPublished() ? 'true' : 'false' }})
{% endif %}
{# DATA OBJECT BUILDER SETTER #}
{% for setter in setters %}
            ->set('{{ setter.name }}', {{ pcmb_value_to_string(setter.value, dependencies) }})
{% endfor %}
{% for property in object.getProperties %}
            ->setProperty('{{ property.getName() }}', '{{ property.getType() }}', {% if property.getType() == 'bool' %}{{ property.getData() ? 'true' : 'false' }}{% else %}'{{ property.getData() }}'{% endif %}, {{ property.getInherited() ? 'true' : 'false' }}, {{ property.getInheritable() ? 'true' : 'false' }})
{% endfor %}
            ->save();
        return $builder->getObject();
    }
{% for dependency in dependencies %}

    {{ dependency.code }}
{%- endfor %}
{% else %}
        return {{ builder }}::findOrCreate('{{ object.getFullPath() }}', {{ classname }}::class)
            ->getObject();
    }
{% endif %}
{% endautoescape %}